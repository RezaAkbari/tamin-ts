{"attachment":[{"file_content":"ZnVuY3Rpb24gcnVuSnNUZXN0Q29udHJvbGxlcigpew0KICAgIGNvbnN0IGVsZW1WYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RlSnNUZXN0Q29udHJvbGxlciIpOw0KICAgIC8vLS0tLS0NCiAgICBjb25zdCBlbGVtUmVzdWx0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc3VsdFRlc3RDb250cm9sbGVyIik7DQoNCiAgICBlbGVtUmVzdWx0LmlubmVySFRNTCA9IHJ1bkpzQ29kZShlbGVtVmFsdWUudmFsdWUpOw0KfQ0KDQoNCnJ1bkpzQ29kZT1mdW5jdGlvbihjb2RlKXsNCiAgICB0cnkgew0KICAgICAgICByZXR1cm4gZXZhbChjb2RlKTsNCiAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICByZXR1cm4gIGVycm9yUnVuQ29kZUpzKGVycm9yKTsNCiAgICB9DQogICAgcmV0dXJuICIiOw0KfQ0KDQplcnJvclJ1bkNvZGVKcz1mdW5jdGlvbihlcnJvcil7DQogICAgY29uc29sZS5lcnJvcign2YXYtNqp2YTbjCDYr9ixINin2KzYsdin24wg2qnYryDYsdiuINiv2KfYr9mHINin2LPYqicpOw0KICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOw0KICAgIHJldHVybiB0eV9fbWFpbi5lbGVtZW50RXJyb3JSdW5Db2RlSnMoZXJyb3IpOw0KfQ0KDQplbGVtZW50RXJyb3JSdW5Db2RlSnM9ZnVuY3Rpb24oZXJyb3Ipew0KICAgIHJldHVybiAgJzxzZWN0aW9uIGNsYXNzPSJib3JkZXIgYm9yZGVyLWRhbmdlciBwLTIgdGV4dC1kYW5nZXIgbXQtMiB0ZXh0LWNlbnRlciI+ICcrZXJyb3IrJyDZhdi02qnZhCDYstuM2LEg2K/YsSDZvtix2K/Yp9iy2LIg2qnYryDYsdiuINiv2KfYr9mHINin2LPYqjwvc2VjdGlvbj4nOw0KfQ==","mime":"application/x-javascript","name":"tool_tab_test_controller.js"},{"file_content":"KnsNCiAgICBkaXJlY3Rpb246IHJ0bDsNCn0NCg0KdGV4dGFyZWEgLCAjcmVzdWx0VGVzdENvbnRyb2xsZXJ7DQogICAgZGlyZWN0aW9uOiBsdHI7DQogICAgd2hpdGUtc3BhY2U6IHByZTsNCn0NCg0KI3Jlc3VsdFRlc3RDb250cm9sbGVyew0KICAgIG1pbi1oZWlnaHQ6IDE1MHB4Ow0KfQ==","mime":"text/css","name":"tool_tab_test_controller.css"}],"bytecode_command":"","command":"result = teamyar.get_license_info();\r\nlocal _CONST_BOT_PREFIX_PATH = \"bot/run/\"..result.id..\"/\"\r\nlocal _CONST_BOT_NAME = \"tool_tab_test_controller\"\r\n---\r\n\r\n\r\n---\r\nlistParams = {};\r\nfunction getListParams()\r\n    if #listParams == 0 then\r\n        listParams =  teamyar.get_input();\r\n    end\r\n    return listParams\r\nend\r\nfunction getParam(paramName , cast , default)\r\n    local params = getListParams();\r\n    if params[paramName] ~= nil then\r\n        if cast==\"string\" then\r\n            return getParamToString(params , paramName , default);\r\n        elseif cast==\"number\" then\r\n            return getParamToNumber(params , paramName , default);\r\n        elseif cast==\"boolean\" then\r\n            return getParamToBoolean(params , paramName , default);\r\n        elseif cast==\"table\" then\r\n            return toTable(params[paramName]);\r\n        else\r\n            return params[paramName];\r\n        end\r\n    end\r\n    if default == nil then\r\n        return nil;\r\n    else\r\n        return default;\r\n    end\r\nend\r\nfunction setParamToObject(object , paramName , cast)\r\n    local getParam = getParam(paramName , cast);\r\n    if getParam ~= nil then\r\n        object[paramName] = getParam;\r\n    end\r\nend\r\nfunction issetKey(table, element)\r\n    for key, value in pairs(table) do\r\n        if key == element then\r\n            return true\r\n        end\r\n    end\r\n    return false\r\nend\r\nfunction getParamToString(array , key , default)\r\n    if array[key] ~= nil and #array[key] > 0 then\r\n        return tostring(array[key]);\r\n    else\r\n        if default == nil then\r\n            return \"\";\r\n        else\r\n            return tostring(default);\r\n        end\r\n    end\r\nend\r\nfunction getParamToNumber(array , key , default)\r\n    if array[key] ~= nil and tonumber(array[key]) ~= nil and tonumber(array[key]) > 0 then\r\n        return tonumber(array[key]);\r\n    else\r\n        if default == nil then\r\n            return 0;\r\n        else\r\n            return tonumber(default);\r\n        end\r\n    end\r\nend\r\nfunction getParamToBoolean(array , key , default)\r\n    if array[key] ~= nil then\r\n        if type(array[key]) == \"number\" then\r\n            if type(array[key]) == 1 then\r\n                return true;\r\n            elseif type(array[key]) == 0 then\r\n                return false;\r\n            end\r\n        elseif type(array[key]) == \"boolean\" then\r\n            return array[key];\r\n        end\r\n    end\r\n    if default == nil then\r\n        return false;\r\n    else\r\n        return default;\r\n    end\r\nend\r\nfunction toTable(data , default)\r\n    if type(data) == \"table\" then\r\n        return  data;\r\n    elseif type(data) == \"string\" then\r\n        return stringToTable(data , default);\r\n    end\r\n    if default == nil then\r\n        return {};\r\n    else\r\n        return default;\r\n    end\r\nend\r\n\r\n---\r\n\r\n\r\n--------------------------------\r\n-- chat Bot\r\n--------------------------------\r\nbotToolTabTestController = {};\r\n\r\nfunction botToolTabTestController:init()\r\n\r\n    return self\r\nend\r\n\r\nfunction botToolTabTestController.run()\r\n    local html ='<section class=\"container\"> <section class=\" border-bottom pb-1 mt-2 d-flow-root\">'\r\n    html = html..'<link rel=\"stylesheet\" href=\"'.._CONST_BOT_PREFIX_PATH.._CONST_BOT_NAME..'/'.._CONST_BOT_NAME..'.css\">'\r\n\r\n\r\n    html =html .. [[\r\n<form class=\"mx-5\">\r\n    <div class=\"form-group mt-2\">\r\n        <label for=\"codeJsTestController\" class=\"pb-1 px-2 bg-dark rounded text-white d-block\">کد js کنترلر مربوطه را وارد نمایید</label>\r\n        <textarea class=\"form-control\" id=\"codeJsTestController\" rows=\"8\"></textarea>\r\n    </div>\r\n    <button type=\"button\" class=\"btn btn-primary me-5 mt-2 overflow-auto\" onclick=\"runJsTestController()\">اجرا</button>\r\n    <div class=\"form-group mt-2\">\r\n        <p class=\"pb-1 px-2 bg-dark rounded text-white d-block\"> نتیجه </p>\r\n        <p class=\"form-control border rounded\" id=\"resultTestController\" ></p>\r\n    </div>\r\n</form>\r\n    ]]\r\n\r\n\r\n    html = html..'<script src=\"'.._CONST_BOT_PREFIX_PATH.._CONST_BOT_NAME..'/'.._CONST_BOT_NAME..'.js\">'\r\n\r\n    return html;\r\nend\r\n\r\n\r\n--------------------------------\r\n-- For Start\r\n--------------------------------\r\nfunction botToolTabTestControllerUrn()\r\n    local botToolTabTestController =  botToolTabTestController:init();\r\n\r\n    return botToolTabTestController.run()\r\nend\r\n\r\nteamyar.write_result(botToolTabTestControllerUrn())\r\n\r\n","form_setting":"{\"layout\":{\"width_title\":3,\"col\":\"COL-2\"},\"info\":[],\"schema\":{},\"default_value\":{}}","info":{"async_deadline_run":0,"async_run":0,"cache_time":0,"color":"","db_prefix":"","description":"","domain":"erp.teamyar.com","icon":"","id":432,"license_id":0,"max_execute_time":100,"modify_date":133463203459175899,"name":"تب تست کنترلر","not_showing_in_iframe":1,"open_source":1,"public_access":1,"relateds":[],"result_type":1,"run_path":"2/tool_tab_test_controller","show_in_portal_menu":0,"show_in_widget":1,"subsystem":[]}}